<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <!-- Javascript SDKs-->
    <script src="js/vendor/jquery-3.1.0.js"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/vendor/aws-cognito-sdk.min.js"></script>
    <script src="js/vendor/amazon-cognito-identity.min.js"></script>
    <script src="js/poolConfig.js"></script>
    <script src="js/cognito-auth.js"></script>
    <link rel="stylesheet" href="css/style.css">


</head>
<body>
<form>
    <h1>Zaloguj</h1>

    <input type="text" id="inputUsername"  placeholder="Adres Email" name="username" required autofocus>
    <input type="password" id="inputPassword"  placeholder="HasÅ‚o" name="password" required>
    <button type="button" onclick="signInButton()">Sign</button>

</form>

<script>
  function signInButton() {

    var authenticationData = {
      Username : document.getElementById("inputUsername").value,
      Password : document.getElementById("inputPassword").value,
    };

    //var authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);
    var authenticationDetails = new AWSCognito.CognitoIdentityServiceProvider.AuthenticationDetails(authenticationData);

    var poolData = {
      UserPoolId : _config.cognito.userPoolId, // Your user pool id here
      ClientId : _config.cognito.userPoolClientId, // Your client id here
    };

    var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);

    var userData = {
      Username : document.getElementById("inputUsername").value,
      Pool : userPool,
    };

    var cognitoUser = new AWSCognito.CognitoIdentityServiceProvider.CognitoUser(userData);
    cognitoUser.authenticateUser(authenticationDetails, {
      onSuccess: function (result) {
        console.log('access token + ' + result.getAccessToken().getJwtToken());
        //window.location.href = 'candidateTests.html';
          window.location.replace("candidateTests.html");
      },

      onFailure: function(err) {
       // alert(err);
          alert('Bledny login lub haslo!');
       // console.log('access token + ' + result.getAccessToken().getJwtToken());
       // window.location.href = 'MainView.html';
      },

    });
  }
</script>
</body>
</html>
